#!/usr/bin/python
import os, sys
from wallaby import *
from Library import *
from wait_for_start import *


sys.stdout = os.fdopen(sys.stdout.fileno(),"w",0)
print "Starting the robot!!!"
#start and get into start position
enable_servos()
set_servo_position(3, 2047)
set_servo_position(0, 900)
close_claw(20)
wait_for_start(1)
#into start position!  GO!!
shut_down_in(120)
msleep(500)
move_back(900, 1100)
open_claw(75)
carry_box(75)

#print("START!!!")    
drive_to_black(900) 
drive_to_white(900)
drive_to_black(900)
move_left(900,830)
print("DONE!!!")
#to hospital
drive_to_black(900)
move(900, 400)
msleep(2200)
move_back(900,400)
move_right(900,600)
#getting 1st ball
arm_down(20)
move(900,450)
move_right(300,200)
close_claw(75)
move_back(900, 150)
arm_back(75)
open_claw(75)
msleep(500)
#next set of balls
move_right(700,250)
move(900,750)
arm_down(50)
move(900,400)
move_right(150,250)
close_claw(50)
arm_back(50)
open_claw(50)
    
#set 3 of balls
print("here")
#move_right(900,1)
print("now here")
arm_up(50)
move(900,2100)
move_right(900,20)
arm_down(50)
move_right(1000,20)
close_claw(50)
arm_back(50)
open_claw(50)
    
#set 4
arm_up(75)
move_right(900, 100)
move(900,2800)
move_left(450,200)
arm_down(50)
move(900, 200)
move_right(450,150)
close_claw(50)
arm_back(50)
open_claw(50)

#final set
print("final")
move(900,2100)
move_left(900,50)
arm_down(50)
move(900,700)
move_right(900, 30)
close_claw(50)
arm_back(50)
open_claw(50)

#going to dump balls
move_right(990,100)
move_to_hit(900)
move(900,100)
move_back(900,100)
move_right(900,950)
move_back(900,2000) 
drive_to_black(900)
msleep(100)
drive_to_white(900)
msleep(100)
print("I didnt skip")
drive_to_black(900)
move_right(900,900)
right_to_black(900)
#dumping
arm_up(50)
move_left(900,450)
move(900,200)
down_box(40)
for _ in range(20):
	print("vibrate!!!")
	set_servo_position(Box, 570)
  	msleep(100)
  	set_servo_position(Box, 470)
	msleep(100)
carry_box(50)
move(900,200)
arm_back(50)
move_right(900,1700)
move_back(900,1500)
close_claw(50)
arm_down(50)
move_right(600, 375)
arm_back(50)
open_claw(50)
arm_down(50)
move(900,1100)
#gas valve
arm_back(50)
move_right(900, 1400)
move_back(900, 3000)
move(900, 3000)
move_right(900, 1100)
move_to_hit(900)
move_back(900, 1200)
open_claw(50)
arm_down(50)
set_servo_position(2, 1200)
msleep(200)
set_servo_position(3, 950)
msleep(200)
move_left(900, 3300)
arm_down(50)
move_left(900,200)
open_claw(50)
move(900, 2000)
"""
#electric lines
arm_back(50)
move_left(900,700)
move_back(900,200)
set_servo_position(3,1000)
msleep(500)
move(900,300)
close_claw(50)
move(900,300)
move_right(500,600)
down_box(40) 
"""